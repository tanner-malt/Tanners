name: Automated Tests

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
      with:
        submodules: 'recursive'
    
    - name: Setup Hugo
      uses: peaceiris/actions-hugo@v2
      with:
        hugo-version: 'latest'
        extended: true
    
    - name: Build site
      run: hugo
    
    - name: Verify build output
      run: |
        if [ -d "public" ]; then
          echo "Build successful - public directory exists"
          ls -la public/
        else
          echo "Build failed - no public directory"
          exit 1
        fi 